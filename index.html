<html>

<head>
  <title>Group 7 - Interior Design Simulator</title>
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
  <!--Three.js , etc. libraries-->
  <script src="js/three.js"></script>
  <script src="js/OrbitControls.js"></script>
  <script src="js/dat.gui.min.js"></script>
  <script src="js/PLYLoader.js"></script>
  <script src="js/OBJLoader.js"></script>
  <script src="js/MTLLoader.js"></script>
  <!-- <script type="module" src="js/CSS2DRenderer.js"></script> -->

  <div id="info">
    <p>Computer Graphics (Group 7) - Interior Design Simulator</p>
  </div>

  <script src="InitScene.js"> </script>
  <script src="FloorPlan.js"> </script>
  <script src="RoomLighting.js"> </script>
  <script src="Furnitures.js"></script>
  <script src="MoveObjects.js"></script>
  <!-- <script src="PlayerControls.js"></script> -->
  <script src="SaveScreenshot.js"></script>
  <script src="Skybox.js"> </script>
  
  <script>

    floorPlan();
    furnitures();
    // moveObjects();

    // GUI Controls ///
    var gui;
    function buildGUI(){
      gui = new dat.GUI();
      var params = {
        room_lighting: spotlight.intensity,
        show_room_labels: true,
        sofa: sofaMaterial.color.getHex(),
        master_bed: masterBedMaterial.color.getHex(),
        bed1: bed1Material.color.getHex(),
        bed2: bed2Material.color.getHex(),
        player_perspective: false
      }
      gui.add(params, 'room_lighting', 0, 1).onChange(function(val){
        spotlight.intensity = val;
      });

      var colours = gui.addFolder('Furniture Colours');
      colours.addColor(params, 'sofa' ).onChange(function(val){
        sofaMaterial.color.setHex(val);
      });
      colours.addColor(params, 'master_bed' ).onChange(function(val){
        masterBedMaterial.color.setHex(val);
      });
      colours.addColor(params, 'bed1' ).onChange(function(val){
        bed1Material.color.setHex(val);
      });
      colours.addColor(params, 'bed2' ).onChange(function(val){
        bed2Material.color.setHex(val);
      });

      gui.add(params, 'show_room_labels').onChange(function(val){
        livingRoomLabel.visible = val;
        masterBedroomLabel.visible = val;
        bed1RoomLabel.visible = val;
        bed2RoomLabel.visible = val;
        laundryRoomLabel.visible = val;
        bathroomLabel.visible = val;
        kitchenLabel.visible = val;
      });
      gui.add(params, 'player_perspective').onChange(function(val){
        if(val == true){
          controls.enabled = false;
          playerCameraActive = true;
          requestAnimationFrame(UpdateLoop);
          // playerMovement();
        } else {
          controls.enabled = true;
          playerCameraActive = false;
          requestAnimationFrame(UpdateLoop);
        }
      });
      gui.open();
    }
    buildGUI();    
    var saveImg = { save_screenshot:function(){ 
      saveAsImage();
    }};
    gui.add(saveImg,'save_screenshot');

  </script>

</body>

</html>
